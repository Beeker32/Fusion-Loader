(async () => {
    document.getElementById('endDino').onclick = async function() {
    // Load SweetAlert if it's not already loaded
    if (!window.Swal) {
        const script = document.createElement('script');
        script.src = "https://cdn.jsdelivr.net/npm/sweetalert2@11";
        document.head.appendChild(script);
        await new Promise(resolve => script.onload = resolve);
    }

    // Define the hack function
    const hack = Boot.prototype.game;

    async function endDinoDig() {
        if (!hack._state._states.get("DinoDig")?.timer?.addTime) {
            Swal.fire({
                icon: 'error',
                title: 'Error',
                text: 'You are not in Dino Dig.',
                confirmButtonText: 'OK'
            });
            return;
        }

        // Subtract a huge amount of time to effectively end the game
        hack._state._states.get("DinoDig")?.timer?.addTime(-9e15); // Subtract 285,388.1278538812694 years

        Swal.fire({
            toast: true,
            position: 'bottom',
            icon: 'success',
            title: 'The Dino Dig game has been ended.',
            showConfirmButton: true,
            confirmButtonText: 'OK',
            timer: 5000,
            timerProgressBar: true
        });
    }

    // Execute the function
    endDinoDig();
})();
