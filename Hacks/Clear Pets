(function() {
    document.getElementById('clearPets').onclick = async function() {
    function loadSweetAlert(callback) {
        const script = document.createElement('script');
        script.src = 'https://cdn.jsdelivr.net/npm/sweetalert2@11';
        script.onload = callback;
        document.head.appendChild(script);
    }

    loadSweetAlert(() => {
        const player = Boot.prototype.game._state._current.user.source;
        const hack = Boot.prototype.game;

        hack("Clear All Pets", "Deletes all pets from your kennel.", async (hack, player) => {
            const { value: confirmed } = await Swal.fire({
                title: 'Are you sure?',
                text: "Do you want to clear all your pets?",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Yes, clear them!'
            });

            if (!confirmed) {
                Swal.fire('Cancelled', 'Your pets are safe :)', 'error');
                return;
            }

            player.kennel.data.length = 0;
            Swal.fire({
                position: 'bottom',
                icon: 'success',
                title: 'All pets have been cleared.',
                showConfirmButton: true,
                confirmButtonText: 'OK',
                timer: 3000
            });
        });
    });
}})();
