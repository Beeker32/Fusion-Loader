javascript:(function() {
  // Check if the PXI Token already exists in local storage
  const tokenKey = 'PXI Token';
  let pxiToken = localStorage.getItem(tokenKey);

  // If the token is not found, exit the script
  if (!pxiToken) {
    console.log('No token found in local storage.');
    return;
  }

  // Create a global fusion object if it doesn't exist
  window.fusion = window.fusion || { beta: null, premium: null };

  // Flag to ensure logging happens only once
  let hasLogged = false;

  // Function to fetch and update the data
  function updateData() {
    // Ensure Firebase is available
    if (typeof firebase === 'undefined' || !firebase.firestore) {
      console.error('Firebase is not available on this page.');
      return;
    }

    const db = firebase.firestore();

    db.collection('Users').doc(pxiToken).get().then((doc) => {
      if (doc.exists) {
        const data = doc.data();
        // Update the fusion object with the fetched values
        window.fusion.beta = data.Beta;
        window.fusion.premium = data.Premium;

        // Log the result once if not already logged
        if (!hasLogged) {
          console.log(`fusion.beta: ${data.Beta}`);
          console.log(`fusion.premium: ${data.Premium}`);
          hasLogged = true; // Set the flag to true after logging
        }
      } else {
        console.log('No document found with the given token.');
      }
    }).catch((error) => {
      console.error('Error fetching document:', error);
    });
  }

  // Update the data every second
  setInterval(updateData, 1000);
})();
